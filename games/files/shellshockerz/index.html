
<head>
<style>
        body {
            margin: 0;
            height: 100vh;
            text-align: center;
            font-family: sans-serif;
        }
        h1 {
            display: none;
            margin: 0;
            font-weight: normal;
            font-size: 40px;
        }
        a {
            color: #8a8461;
            text-decoration: underline;
            cursor: pointer;
        }
    </style>
</head>
<body style="margin: 0; height: 100vh;">
<h1><span id="pre"></span><a>here</a><span id="post"></span></h1>
<script>
        var urlObj = new window.URL(window.location.href);
        var url = urlObj.searchParams.get('url');

        if (url) {
            var win;
            var pre = document.getElementById('pre');
            var post = document.getElementById('post');

            document.querySelector('h1').style.display = 'block';
            pre.textContent = 'Click ';
            post.textContent = ' to start the game';
            document.querySelector('a').onclick = function() {
                if (win) {
                    win.focus();
                } else {
                    win = window.open();
                    win.document.body.style.margin = '0';
                    win.document.body.style.height = '100vh';
                    var iframe = win.document.createElement('iframe');
                    iframe.style.border = 'none';
                    iframe.style.width = '100%';
                    iframe.style.height = '100%';
                    iframe.style.margin = '0';
                    iframe.src = url;
                    win.document.body.appendChild(iframe);
                    

                    var interval = setInterval(function() {
                        if (win.closed) {
                            clearInterval(interval);
                            win = undefined;
                            pre.textContent = 'Game closed. Click ';
                            post.textContent = ' to reopen the game';
                        }
                    }, 500);

                    pre.textContent = 'Game is running. Click ';
                    post.textContent = ' to switch to that tab.';
                }
            };
        }
    </script>
</body>
</html>
